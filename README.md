# STT (Speech-To-Text)

Скрипт для транскрибации аудиофайлов с помощью модели OpenAI Whisper. Поддерживает обработку как отдельных файлов, так и пакетную обработку всех аудиофайлов в директории.

## Описание

Этот скрипт использует модель OpenAI Whisper для преобразования речи из аудиофайлов в текст. Он поддерживает различные аудиоформаты и позволяет обрабатывать как одиночные файлы, так и все аудиофайлы в указанной директории.

## Поддерживаемые форматы

- MP3
- WAV
- M4A
- FLAC
- OGG
- WMA
- AAC
- OPUS

## Создание и запуск виртуального окружения Python

```bash
python -m venv ~/transcriber
source ~/transcriber/bin/activate
```

## Установка зависимостей

```bash
pip install torch openai-whisper
```

## Запуск

### Обработка одного файла

```bash
python transcribe.py --file <FILENAME>.mp3
```

### Пакетная обработка всех аудиофайлов в директории

```bash
python transcribe.py --multiple
```

### Пакетная обработка с указанием количества потоков CPU

```bash
python transcribe.py --multiple --threads 4
```

### Обработка одного файла с выводом в реальном времени

```bash
python transcribe.py --file <FILENAME>.mp3 --live
```

### Обработка файлов с указанием языка

```bash
python transcribe.py --file <FILENAME>.mp3 --lang en
```

### Обработка всех файлов в указанной директории

```bash
python transcribe.py --multiple --file /path/to/directory
```

## Аргументы командной строки

- `--file PATH` - Путь к аудиофайлу или директории (обязателен, если не используется --multiple)
- `--lang LANGUAGE` - Язык аудио (по умолчанию: "ru"). Если не указан - автоопределение
- `--threads COUNT` - Количество CPU-потоков (по умолчанию: 2)
- `--output FILE` - Файл для сохранения полного текста (по умолчанию: "transcribe.txt"), игнорируется при --multiple
- `--live` - Выводить каждый распознанный кусочек сразу (в консоль)
- `--multiple` - Обработать все аудиофайлы в директории. Без --file — текущая директория

## Результаты

- При обработке одного файла результат сохраняется в файл, указанный в параметре `--output` (по умолчанию "transcribe.txt")
- При пакетной обработке каждый файл сохраняется в отдельный текстовый файл с тем же именем, но расширением .txt

## Примечания

- Для лучшего качества транскрибации рекомендуется указывать язык аудио
- Использование большего количества CPU-потоков может ускорить процесс транскрибации
- Модель "small" загружается автоматически при запуске скрипта
